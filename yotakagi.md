# cub3D parse

## 1. ファイル形式と全般的な制約
- **ファイル拡張子**: プログラムの第一引数として受け取るファイル名は、必ず `.cub` 拡張子である必要があります。
- **エラーハンドリング**: ファイル内に何らかの設定ミス、不正な文字、未閉鎖のマップなどが存在する場合、プログラムは `Error\n` と出力し、続けて具体的なエラーメッセージを表示して正常終了しなければなりません。
- **メモリ管理**: mallocで割り当てたすべてのメモリは適切に解放し、メモリリークは一切許容されません。

## 2. 設定要素（Identifiers）のパース
マップデータ（迷路本体）が始まる前に、以下の6つの要素を抽出します。これらはマップの直前であれば順不同で配置される可能性があります。

### 2.1 壁のテクスチャ (NO, SO, WE, EA)
- **識別子**: 各方角の壁に対して以下の一意の識別子が割り当てられています。
    - 北 (North): `NO`
    - 南 (South): `SO`
    - 西 (West): `WE`
    - 東 (East): `EA`
- **情報**: 識別子の後に、各テクスチャファイルへのパスを記述します。
- **区切り**: 各識別子と情報のパラメータは、1つ以上のスペースで区切ることができます。

### 2.2 床と天井のカラー (F, C)
- **識別子**:
    - 床 (Floor): `F`
    - 天井 (Ceiling): `C`
- **形式**: `R,G,B` の形式で、各数値は `[0, 255]` の範囲内で指定します。

## 3. マップデータ（The Map）の解析
マップデータは常にファイル内の最後に配置される必要があります。

### 3.1 構成要素とプレイヤーの初期状態
- **使用可能文字**: マップは以下の6文字のみで構成されます。
    - `0`: 空地（移動可能エリア）
    - `1`: 壁
    - `N`, `S`, `E`, `W`: プレイヤーの開始位置と初期の向き
- **プレイヤーの制約**: 開始位置（N, S, E, W）はマップ内に必ず1つだけ存在しなければなりません。

### 3.2 マップの構造ルール
- **閉鎖性**: マップは壁（`1`）によって完全に囲まれている必要があり、隙間がある場合はエラーを返さなければなりません。
- **スペースの扱い**: マップ内のスペース（空白）は有効な一部として扱われます。その処理方法は実装者に委ねられています。
- **改行・空行**: マップ以外の各要素間は、1つ以上の空行で区切ることが可能です。

## 4. データ構造とDDAへの橋渡し
パースしたデータは、DDAアルゴリズムで計算しやすいように保持します。

- **マップ配列**: `char **` または `int **` 形式。壁判定に利用。
- **初期ベクトル**: プレイヤーの向き（N, S, E, W）に合わせて、方向ベクトル（$dir$）とカメラ平面ベクトル（$plane$）の初期値を決定します。
